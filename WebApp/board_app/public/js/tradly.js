var classfieds = {"Для бизнеса":{"name":"for_business","subcategory":{"Все виды":{"advert_param":{},"name":"all"},"Готовый бизнес":{"name":"sale","advert_param":{}},"Оборудование для бизнеса":{"name":"equipment","advert_param":{}}}},"Животные":{"subcategory":{"Все виды":{"advert_param":{},"name":"all"},"Птицы":{"advert_param":{},"name":"birds"},"Другие животные":{"name":"other","advert_param":{}},"Собаки":{"advert_param":{},"name":"dogs"},"Товары для животных":{"name":"products_animals","advert_param":{}},"Кошки":{"advert_param":{},"name":"cats"}},"name":"animals"},"Бытовая электроника":{"name":"electronics","subcategory":{"Фототехника":{"advert_param":{},"name":"photo"},"Телефоны":{"advert_param":{},"name":"phones"},"Компьютерная техника":{"advert_param":{},"name":"computer"},"Все виды":{"advert_param":{},"name":"all"},"Аудио и видео":{"advert_param":{},"name":"audio_video"},"Планшеты":{"name":"plates","advert_param":{}}}},"Недвижимость":{"subcategory":{"Комерческая недвижимость":{"advert_param":{"Все виды":{"name":"all","advert_sec_parametr":{}},"Сдать":{"name":"rent_out","advert_sec_parametr":{}},"Снять":{"name":"take_off","advert_sec_parametr":{}},"Купить":{"name":"buy","advert_sec_parametr":{}},"Продать":{"advert_sec_parametr":{},"name":"sell"}},"name":"commercial"},"Все виды":{"name":"all","advert_param":{}},"Дома и коттеджи":{"advert_param":{"Все виды":{"name":"all","advert_sec_parametr":{}},"Сдать":{"advert_sec_parametr":{"Посуточно":{"name":"short"},"Все виды":{"name":"all"},"На длительный срок":{"name":"long"}},"name":"rent_out"},"Купить":{"advert_sec_parametr":{},"name":"buy"},"Снять":{"name":"take_off","advert_sec_parametr":{"Посуточно":{"name":"short"},"Все виды":{"name":"all"},"На длительный срок":{"name":"long"}}},"Продать":{"advert_sec_parametr":{},"name":"sell"}},"name":"houses_cottages"},"Квартиры":{"advert_param":{"Продать":{"advert_sec_parametr":{},"name":"sell"},"Снять":{"advert_sec_parametr":{"Посуточно":{"name":"short"},"Все виды":{"name":"all"},"На длительный срок":{"name":"long"}},"name":"take_off"},"Купить":{"name":"buy","advert_sec_parametr":{}},"Сдать":{"name":"rent_out","advert_sec_parametr":{"На длительный срок":{"name":"long"},"Все виды":{"name":"all"},"Посуточно":{"name":"short"}}},"Все виды":{"advert_sec_parametr":{},"name":"all"}},"name":"apartments"},"Комнаты и номера":{"name":"rooms","advert_param":{"Все виды":{"advert_sec_parametr":{},"name":"all"},"Снять":{"advert_sec_parametr":{"На длительный срок":{"name":"long"},"Все виды":{"name":"all"},"Посуточно":{"name":"short"}},"name":"take_off"},"Сдать":{"name":"rent_out","advert_sec_parametr":{"На длительный срок":{"name":"long","all":{"name":"Все виды"}},"Посуточно":{"name":"short"}}}}}},"name":"real_estate"},"Услуги":{"name":"service","subcategory":{"Спрос":{"name":"request","advert_param":{"Другое":{"advert_sec_parametr":{},"name":"other"},"Праздники, мероприятия":{"name":"holidays","advert_sec_parametr":{}},"Бытовые услуги":{"name":"domestic","advert_sec_parametr":{}},"Красота и здоровье":{"name":"health","advert_sec_parametr":{}},"Деловые услуги":{"advert_sec_parametr":{},"name":"business"},"Реклама и полиграфия":{"name":"pr","advert_sec_parametr":{}},"Фото и видеосъемка":{"name":"photos","advert_sec_parametr":{}},"Няни и сиделки":{"advert_sec_parametr":{},"name":"nannies"},"Ремонт":{"advert_sec_parametr":{},"name":"repair"},"Питание":{"advert_sec_parametr":{},"name":"eat"},"Все виды":{"advert_sec_parametr":{},"name":"all"},"Уход за животными":{"name":"animal","advert_sec_parametr":{}},"Обучение, курсы":{"advert_sec_parametr":{},"name":"training"},"IT, интернет":{"name":"it","advert_sec_parametr":{}},"Искусство":{"advert_sec_parametr":{},"name":"art"}}},"Предложения":{"advert_param":{"Реклама и полиграфия":{"advert_sec_parametr":{},"name":"pr"},"Праздники, мероприятия":{"name":"holidays","advert_sec_parametr":{}},"Другое":{"name":"other","advert_sec_parametr":{}},"Деловые услуги":{"advert_sec_parametr":{},"name":"business"},"Красота и здоровье":{"advert_sec_parametr":{},"name":"health"},"Бытовые услуги":{"name":"domestic","advert_sec_parametr":{}},"Обучение, курсы":{"name":"training","advert_sec_parametr":{}},"Уход за животными":{"name":"animal","advert_sec_parametr":{}},"Все виды":{"advert_sec_parametr":{},"name":"all"},"IT, интернет":{"advert_sec_parametr":{},"name":"it"},"Искусство":{"name":"art","advert_sec_parametr":{}},"Ремонт":{"name":"repair","advert_sec_parametr":{}},"Няни и сиделки":{"advert_sec_parametr":{},"name":"nannies"},"Фото и видеосъемка":{"name":"photos","advert_sec_parametr":{}},"Питание":{"advert_sec_parametr":{},"name":"eat"}},"name":"offers"},"Все виды":{"advert_param":{},"name":"all"}}},"Работа":{"name":"job","subcategory":{"Все виды":{"name":"all","advert_param":{}},"Резюме":{"advert_param":{"Юриспруденция":{"name":"jurisprudence","advert_sec_parametr":{}},"Все виды":{"name":"all","advert_sec_parametr":{}},"Консультирование":{"name":"counseling","advert_sec_parametr":{}},"IT, интернет":{"advert_sec_parametr":{},"name":"it"},"Продажи":{"name":"sale","advert_sec_parametr":{}},"Образование":{"name":"education","advert_sec_parametr":{}},"Автомобильный бизнес":{"advert_sec_parametr":{},"name":"cars"},"Искусство и развлечения":{"advert_sec_parametr":{},"name":"art"},"Фитнес, салоны красоты":{"advert_sec_parametr":{},"name":"fitness"},"Другое":{"advert_sec_parametr":{},"name":"other"},"Туризм, рестораны":{"name":"tourism","advert_sec_parametr":{}},"Маркетинг, реклама и PR":{"name":"pr","advert_sec_parametr":{}},"Административная работа":{"advert_sec_parametr":{},"name":"management"},"Медицина, фармецевтика":{"name":"health","advert_sec_parametr":{}}},"name":"cv"},"Вакансии":{"name":"vacancies","advert_param":{"Все виды":{"name":"all","advert_sec_parametr":{}},"Консультирование":{"advert_sec_parametr":{},"name":"counseling"},"Юриспруденция":{"advert_sec_parametr":{},"name":"jurisprudence"},"Образование":{"name":"education","advert_sec_parametr":{}},"IT, интернет":{"name":"it","advert_sec_parametr":{}},"Продажи":{"name":"sale","advert_sec_parametr":{}},"Искусство и развлечения":{"advert_sec_parametr":{},"name":"art"},"Другое":{"advert_sec_parametr":{},"name":"other"},"Фитнес, салоны красоты":{"advert_sec_parametr":{},"name":"fitness"},"Автомобильный бизнес":{"name":"cars","advert_sec_parametr":{}},"Административная работа":{"name":"management","advert_sec_parametr":{}},"Медицина, фармецевтика":{"name":"health","advert_sec_parametr":{}},"Туризм, рестораны":{"name":"tourism","advert_sec_parametr":{}},"Маркетинг, реклама и PR":{"name":"pr","advert_sec_parametr":{}}}}}},"Для дома":{"subcategory":{"Посуда и товары для кухни":{"advert_param":{},"name":"cookware"},"Бытовая техника":{"advert_param":{},"name":"appliances"},"Мебель":{"name":"furniture","advert_param":{}},"Растения":{"name":"plants","advert_param":{}},"Все виды":{"name":"all","advert_param":{}},"Продукты питания":{"name":"foodstuffs","advert_param":{}}},"name":"home"},"Транспорт":{"name":"transport","subcategory":{"Автомобили":{"name":"cars","advert_param":{}},"Запчасти, аксессуары":{"advert_param":{"Тюнинг":{"name":"tuning","advert_sec_parametr":{}},"Все виды":{"advert_sec_parametr":{},"name":"all"},"Запчасти":{"advert_sec_parametr":{},"name":"parts"},"Багажники":{"advert_sec_parametr":{},"name":"trunks"},"Аксессуары":{"advert_sec_parametr":{},"name":"accessories"},"Колеса":{"advert_sec_parametr":{},"name":"wheels"},"Иструменты":{"advert_sec_parametr":{},"name":"instruments"},"Экипировка":{"advert_sec_parametr":{},"name":"equipment"}},"name":"parts_accessories"},"Водный транспорт":{"name":"water_transport","advert_param":{}},"Мопеды":{"name":"mopeds","advert_param":{"Продать":{"advert_sec_parametr":{},"name":"sell"},"Все виды":{"advert_sec_parametr":{},"name":"all"},"Сдать в аренду":{"name":"rent_out","advert_sec_parametr":{"Посуточно":{"name":"short"},"На длительный срок":{"name":"long"},"Все виды":{"name":"all"}}},"Взять в аренду":{"advert_sec_parametr":{"Посуточно":{"name":"short"},"Все виды":{"name":"all"},"На длительный срок":{"name":"long"}},"name":"take_off"},"Купить":{"name":"buy","advert_sec_parametr":{}}}},"Все виды":{"advert_param":{},"name":"all"},"Мотоциклы":{"name":"motorcycles","advert_param":{"Все виды":{"advert_sec_parametr":{},"name":"all"},"Сдать в аренду":{"advert_sec_parametr":{"Посуточно":{"name":"short"},"Все виды":{"name":"all"},"На длительный срок":{"name":"long"}},"name":"rent_out"},"Взять в аренду":{"name":"take_off","advert_sec_parametr":{"Посуточно":{"name":"short"},"На длительный срок":{"name":"long"},"Все виды":{"name":"all"}}},"Купить":{"name":"buy","advert_sec_parametr":{}},"Продать":{"name":"sell","advert_sec_parametr":{}}}}}},"Все категории":{"subcategory":{},"name":"all"},"Хобби и отдых":{"subcategory":{"Все виды":{"advert_param":{},"name":"all"},"Билеты и путешествия":{"name":"tickets","advert_param":{}},"Велосипеды":{"name":"bicycles","advert_param":{}},"Спорт и отдых":{"name":"sport","advert_param":{}},"Книги и журналы":{"advert_param":{},"name":"books"},"Музыкальные инструменты":{"advert_param":{},"name":"musical"}},"name":"hobbies"},"Личные вещи":{"subcategory":{"Одежда, обувь, аксессуары":{"advert_param":{},"name":"clothing"},"Товары для детей":{"name":"goods_for_children","advert_param":{}},"Красота и здоровье":{"name":"health","advert_param":{}},"Часы и украшения":{"advert_param":{},"name":"watches"},"Все виды":{"name":"all","advert_param":{}}},"name":"paraphernalia"}};
var category='';
var subcategory='';
var advertparam='';
var render=function(obj){
  var list='';
  Object.keys(obj).sort().forEach(function(item) {
    if(typeof item == "undefined" || item == 'Все виды' || item == 'Все категории'){return;};
    list+='<li><a>'+item+'</a></li>';
});
  return list;
};

$("#more").click(function(){
    $("#category-list").slideToggle("fast");
});

$("#message-form").click(function(){
    $("#feedback-message").hide("fast");
    $("#message").slideToggle("fast");
});

$("#report-other").click(function(){
    $("#message").hide("fast");
    $("#feedback-message").slideToggle("fast");
});


$('#category-dd-menu li').click(function(){
  var selected = $(this).text();
  $('#category-button').html(selected);
  $('#category-input').val(classfieds[selected].name);
});

$('.category li').click(function(){
  var selected = $(this).text();
  category = selected;
  $('#ddcategory').html(selected);
  $('#ddcategory-xs').html(selected);
  $('#ddsubcategory').html('Все виды');
  $('#subcategory').val('all');
  $('#advert-param').val('');
  $('#div-subcategory').show();
  $('#div-advert-parametr').hide();
  $('#advert-sec-param').val('');
  $('#div-advert-sec-parametr').hide();
  $('#label-price').text('Цена');
  $('#category').val(classfieds[selected].name);
  $('#subcategory-menu').html(render(classfieds[selected].subcategory));

});

$('#subcategory-menu').on('click', 'a',function(){
  var selected = $(this).text();
  subcategory = selected;
  $('#ddsubcategory').html(selected);
  $('#ddparam').html('Выберите вид');
  $('#advert-param').val('');
  $('#div-advert-parametr').hide();
  $('#advert-sec-param').val('');
  $('#div-advert-sec-parametr').hide();
  if (selected == 'Предложения'){
    $('#label-price').text('Цена(от)');
  }else if(selected == 'Спрос'){
    $('#label-price').text('Цена(до)');
  }else{
    $('#label-price').text('Цена');
  }
  $('#subcategory').val(classfieds[category].subcategory[selected].name);
  if (typeof classfieds[category].subcategory[selected].advert_param['Все виды'] != "undefined"){
    $('#div-advert-parametr').show();
    $('#advert-param-menu').html(render(classfieds[category].subcategory[selected].advert_param));
  }; 
});

$('#advert-param-menu').on('click', 'a',function(){
  var selected = $(this).text();
  advertparam = selected;
  $('#ddparam').html(selected);
  $('#ddsecparam').html('Выберите вид');
  $('#advert-sec-param').val('');
  $('#div-advert-sec-parametr').hide();
  if (category != 'Услуги'){
    $('#label-price').text('Цена');
  };
  $('#advert-param').val(classfieds[category].subcategory[subcategory].advert_param[selected].name);
  if (typeof classfieds[category].subcategory[subcategory].advert_param[selected].advert_sec_parametr['Все виды'] != "undefined"){
    $('#div-advert-sec-parametr').show();
    $('#advert-sec-param-menu').html(render(classfieds[category].subcategory[subcategory].advert_param[selected].advert_sec_parametr));
  }; 
});


$('#advert-sec-param-menu').on('click', 'a',function(){
  var selected = $(this).text();
  if (selected == 'Посуточно'){
    $('#label-price').text('Цена(в день)');
  }else{
    $('#label-price').text('Цена(в месяц)');
  };
  $('#ddsecparam').html(selected);
  $('#advert-sec-param').val(classfieds[category].subcategory[subcategory].advert_param[advertparam].advert_sec_parametr[selected].name);
});

$('.show-message').click(function(){
  if($(this).text() == 'Прочитать'){
    $(this).text('Скрыть')
  }else{
    $(this).text('Прочитать')
  }

  $(this).parent('li').parent('ul').find('.message').slideToggle("fast");
});
